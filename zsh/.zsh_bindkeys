# these commands are used to enable nvim remaps
bindkey -r '\C-s'
stty -ixon

bindkey "^A" beginning-of-line
bindkey "^E" end-of-line
bindkey "^Q" push-line-or-edit

kitty-tab-manager() {
    local dir_path=$(find ~/ ~/personal ~/work -mindepth 1 -maxdepth 1 -type d | fzf --no-preview)

    # if the user exited fzf without choosing a dir
    [ -z $dir_path ] && return 0

    kitty @ focus-window --match cwd:$dir_path > /dev/null 2>&1
    # if switch tab was successful
    [ $? -eq 0 ] && return 0

    local dir_name=$(basename "$dir_path" | tr . _)
    # create new tab
    kitty @ launch --type=tab --tab-title "$dir_name" --cwd=$dir_path > /dev/null 2>&1
}
zle -N kitty-tab-manager
bindkey '^f' kitty-tab-manager

# git-fzf bind keys
git-fzf-checkout-bindkey() { echo; git-fzf checkout; zle reset-prompt; }
zle -N git-fzf-checkout-bindkey
bindkey '^o' git-fzf-checkout-bindkey
git-fzf-log-bindkey() { git-fzf log; }
zle -N git-fzf-log-bindkey
bindkey '^l' git-fzf-log-bindkey

git-checkout-prev() { echo; git checkout -; zle reset-prompt; }
zle -N git-checkout-prev
bindkey '^r' git-checkout-prev
