# these commands are used to enable nvim remaps
bindkey -r '\C-s'
stty -ixon

bindkey "^A" beginning-of-line
bindkey "^E" end-of-line
bindkey "^Q" push-line-or-edit

get-main-dirs-bindkey() {
    local dirs=$(ls -d ~/*)

    local dir_paths=( "${HOME}/personal/" "${HOME}/work/" )

    for dir_path in "${dir_paths[@]}"
    do
        [ ! -d "${dir_path}" ] && continue
        local list_dirs_command="ls -d ${dir_path}*"
        $(eval $list_dirs_command) > /dev/null 2>&1
        # if there are no directories
        [ $? -eq 1 ] && continue
        dirs+="\n"
        dirs+=$(eval $list_dirs_command)
    done

    local dir=$(echo $dirs | fzf --no-preview)

    # if the user exited fzf without choosing a dir
    [ -z $dir ] && return 0

    echo
    cd $dir
    zle reset-prompt
}
zle -N get-main-dirs-bindkey
bindkey '^f' get-main-dirs-bindkey

# git-fzf bind keys
git-fzf-checkout-bindkey() { echo; git-fzf checkout; zle reset-prompt; }
zle -N git-fzf-checkout-bindkey
bindkey '^o' git-fzf-checkout-bindkey
git-fzf-log-bindkey() { git-fzf log; }
zle -N git-fzf-log-bindkey
bindkey '^l' git-fzf-log-bindkey

git-checkout-prev() { echo; git checkout -; zle reset-prompt; }
zle -N git-checkout-prev
bindkey '^r' git-checkout-prev
